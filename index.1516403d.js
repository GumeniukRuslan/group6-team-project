function e(e){return e&&e.__esModule?e.default:e}var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},o={},n={},s=t.parcelRequired7c6;null==s&&((s=function(e){if(e in o)return o[e].exports;if(e in n){var t=n[e];delete n[e];var s={id:e,exports:{}};return o[e]=s,t.call(s.exports,s,s.exports),s.exports}var a=new Error("Cannot find module '"+e+"'");throw a.code="MODULE_NOT_FOUND",a}).register=function(e,t){n[e]=t},t.parcelRequired7c6=s),s("kyEFX").register(JSON.parse('{"5ZPII":"index.1516403d.js","kx99P":"sample.eaf37d8e.png","1yVwl":"amazon.8e8667c1.png","4tfg6":"book1.8d01f172.png","cv7CL":"book2.b226e49c.png","8OQ7p":"icons.7429e8d9.svg","4l2W5":"index.8fdd4eb4.js"}')),s("fAODQ"),s("3oIZ9"),s("2ix2C");var a=s("2e5nt"),r=s("fAODQ");window.addEventListener("load",(async function(){try{const e=await(0,a.getCategoryList)();r.refs.allCategoriesList.insertAdjacentHTML("beforeend",e.map((({list_name:e})=>`<li class="categories__item" data-category="${e}">${e}</li>`)).join(""))}catch(e){console.log(e)}})),s("7dwgr");var i;a=s("2e5nt"),r=s("fAODQ");i=new URL(s("kyEFX").resolve("kx99P"),import.meta.url).toString();const l=t=>t.map((({_id:t,book_image:o,title:n,author:s})=>`<li class="card" data-book="${t}">\n        <div class="card__thumb">\n            <img src="${o||e(i)}" loading="lazy" alt="${n}" class="card__img">\n            <div class="card__text">\n                <p class="card__text-inner">quick view</p>\n            </div>\n        </div>\n        <h3 class="card__title">${n}</h3>\n        <h4 class="card__author">${s}</h4>\n    </li>`)).join("");r=s("fAODQ");const c=e=>{const t=e.split(" "),o=t[t.length-1],n=t.slice(0,-1).join(" ");r.refs.categoryTitle.innerHTML=`${n} <span class="books__title-last">${o}</span>`};var d=s("43IiB"),g=s("dbSHG");const b=async()=>{(0,d.startLoading)(),c("Best sellers books");try{const e=await(0,a.getTopBooks)();r.refs.booksHandler.innerHTML=e.map((({list_name:e,books:t})=>`<div class="category" data-category="${e}">\n        <h2 class="category__title">${e}</h2>\n        <ul class="category__list">\n            ${l(t)}\n        </ul>\n        <button class="btn--violet category__btn" data-category="${e}">see more</button>\n        </div>`)).join("")}catch(e){r.refs.booksHandler.innerHTML=(0,g.renderError)("Something went wrong...")}(0,d.removeLoading)()};r.refs.booksHandler&&window.addEventListener("load",b);r=s("fAODQ");const m=()=>{window.scroll({top:0,behavior:"smooth"})};new IntersectionObserver((e=>{e.forEach((e=>{e.isIntersecting?r.refs.scrollTopBtn.classList.add("hidden"):r.refs.scrollTopBtn.classList.remove("hidden")}))})).observe(r.refs.scrollTopTarget),r.refs.scrollTopBtn.addEventListener("click",m),s("j5dhk");r=s("fAODQ"),a=s("2e5nt"),d=s("43IiB"),g=s("dbSHG");const f=e=>{document.querySelector(".active-category").classList.remove("active-category"),document.querySelectorAll(".categories__item").forEach((t=>{t.dataset.category===e&&t.classList.add("active-category")}))},v=async e=>{if("BUTTON"!==e.target.nodeName&&"LI"!==e.target.nodeName)return;const t=e.target.dataset.category;if(f(t),"all"!==t){(0,d.startLoading)();try{c(t);const e=await(0,a.getBooksOfCertainCategory)(t);r.refs.booksHandler.innerHTML=`<ul class="books__list">${l(e)}</ul>`,m()}catch(e){r.refs.booksHandler.innerHTML=(0,g.renderError)("Something went wrong...")}(0,d.removeLoading)()}else b()};r.refs.booksHandler.addEventListener("click",v),r.refs.allCategoriesList.addEventListener("click",v);r=s("fAODQ"),r=s("fAODQ");var u=s("2ix2C");function k(e){if(e.target.classList.contains("btn-add-list"))try{(0,u.addToShopList)(e),console.log("hooray")}catch(e){console.log(e)}}s("fAODQ");u=s("2ix2C");function _(e){if(e.target.classList.contains("btn-remove-list"))try{(0,u.rmvFrmShopList)(e)}catch(e){console.log(e)}}function p(e){"Escape"===e.code&&(r.refs.backdrop.classList.add("is-hidden"),r.refs.backdrop.removeEventListener("click",_),r.refs.backdrop.removeEventListener("click",k),r.refs.backdrop.removeEventListener("click",h),window.removeEventListener("keydown",p))}const L=e=>{"Escape"===e.code&&y(e)};function h(e){r.refs.backdrop.classList.add("is-hidden"),e.currentTarget.removeEventListener("click",h),window.removeEventListener("keydown",p)}const y=()=>{document.querySelector(".modal-overlay.open .login__switch").removeEventListener("click",S);const e=document.querySelector(".modal-overlay.open");e.classList.remove("open"),document.body.classList.remove("lock"),e.removeEventListener("click",w),e.removeEventListener("click",E),e.addEventListener("keydown",L)},w=e=>{e.target.closest("button")&&e.target.closest("button").classList.contains("modal__close")&&y(e)},E=e=>{e.target===e.currentTarget&&e.target.classList.contains("modal-overlay")&&y(e)};r=s("fAODQ");s("4QsFx");const H=e=>{e.classList.add("open"),document.body.classList.add("lock"),e.addEventListener("click",w),e.addEventListener("click",E),window.addEventListener("keydown",L);document.querySelector(".modal-overlay.open .login__switch").addEventListener("click",S)};function T(e){if("BUTTON"!==e.target.nodeName)return;console.log("fork");const t=e.target.dataset.login;let o;if("sign-up"===t)o=r.refs.signUpModal;else{if("sign-in"!==t)return;o=r.refs.signInModal}H(o)}function S(e){if(!e.target.dataset.login)return;if(e.target.classList.contains("active-label"))return;y();const t=e.target.dataset.login;H(document.querySelector(`.js-${t}`))}r.refs.elmsNonAuth&&r.refs.elmsNonAuth.forEach((e=>e.addEventListener("click",T))),s("4QsFx");var $;r=s("fAODQ"),a=s("2e5nt");$=new URL(s("kyEFX").resolve("1yVwl"),import.meta.url).toString();var A;A=new URL(s("kyEFX").resolve("4tfg6"),import.meta.url).toString();var O;O=new URL(s("kyEFX").resolve("cv7CL"),import.meta.url).toString();var x;function F({_id:t,book_image:o,title:n,author:s,description:a,amazon_product_url:r,buy_links:l}){const c=l.filter((e=>"Apple Books"===e.name)),d=l.filter((e=>"Bookshop"===e.name));return`<div class="modal-book">\n  <button class="modal-book__close" type="button" data-modal-close>\n    <svg class="modal-book__close-icon" width="24" height="24">\n      <use href="${e(x)}#icon-close"></use>\n    </svg>\n  </button>\n  <div class="modal-book__content" data-book="${t}">\n      <div class="modal-book--flex">\n          <div class="modal-book__thumb">\n              <img class="modal-book__img" src="${o||e(i)}" alt="aaa" loading="lazy">\n          </div>\n          <div class="modal-book__text">\n              <h2 class="modal-book__title">${n}</h2>\n              <p class="modal-book__author">${s}</p>\n              <p class="modal-book__description">${a||"Unfortunately, there is no description"}</p>\n              <ul class="modal-book__links">\n                <li><a target="_blank" rel="noopener noreferrer" href="${r}">\n                  <img class="amazon" src="${e($)}" alt="amazon-logo"></a></li>\n                <li><a target="_blank" rel="noopener noreferrer" href="${c}">\n                  <img class="book-first"src="${e(A)}" alt=""></a></li>\n                <li><a target="_blank" rel="noopener noreferrer" href="${d}">\n                  <img class="book-second"src="${e(O)}" alt=""></a></li>\n              </ul>\n          </div>\n      </div>\n      <div class="modal-book__btns"></div>\n    </div>\n</div>`}x=new URL(s("kyEFX").resolve("8OQ7p"),import.meta.url).toString();d=s("43IiB"),g=s("dbSHG"),r=s("fAODQ");u=s("2ix2C");r.refs.booksHandler.addEventListener("click",(async e=>{if(!e.target.closest(".card"))return;r.refs.backdrop.innerHTML="",(0,d.startLoading)(),r.refs.backdrop.classList.remove("is-hidden");const t=e.target.closest(".card").dataset.book;try{const e=await(0,a.getOneBookById)(t);r.refs.backdrop.innerHTML=F(e);const o=document.querySelector(".modal-book__btns"),n=await(0,u.getBksFrmShpLst)();u.userCurrent?n.includes(t)?o.innerHTML='<button class="btn--violet modal-book__btn" type="button" data-action="delete">remove from the shopping list</button>\n    <p class="modal-book__notification">\n      Congratulations! You have added the book to the shopping list. To delete, press the button “Remove from the shopping list”.\n    </p>':o.innerHTML='<button class="btn--violet modal-book__btn" type="button" data-action="add">add to shopping list</button>':o.innerHTML='<button class="btn--violet modal-book__btn" type="button" disabled>add to shopping list</button>\n    <p class="modal-book__notification">\n     You need to sign in to be able to add books to your shopping list.\n    </p>'}catch(e){r.refs.backdrop.innerHTML=(0,g.renderError)("Something went wrong")}r.refs.backdrop.addEventListener("click",h),window.addEventListener("keydown",p),(0,d.removeLoading)()}));
//# sourceMappingURL=index.1516403d.js.map
