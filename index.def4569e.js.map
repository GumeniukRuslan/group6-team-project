{"mappings":"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","sources":["node_modules/@parcel/runtime-js/lib/runtime-99eaa6b237a88385.js","src/index.js","src/js/render/renderAllCategories.js","src/js/topBooks.js","node_modules/@parcel/runtime-js/lib/runtime-b538721a2078ac72.js","src/js/render/renderBookCard.js","src/js/render/renderCategoryTitle.js","src/js/render/renderTopCategories.js","src/js/scrollToTop.js","src/js/categoryBooks.js","src/js/helpers/activeCategory.js","src/js/components/closeModalBtn.js","src/js/components/closeModalOnEsc.js","src/js/helpers/addBookToShopList.js","src/js/helpers/deleteBookFromModal.js","src/js/components/closeModalBackdrop.js","src/js/helpers/modalHelpers.js","src/js/loginModals.js","src/js/createModal.js","node_modules/@parcel/runtime-js/lib/runtime-15c55b5baf7fbabb.js","node_modules/@parcel/runtime-js/lib/runtime-2292aaa4171ba88f.js","node_modules/@parcel/runtime-js/lib/runtime-02fa68b20734d6fd.js","node_modules/@parcel/runtime-js/lib/runtime-0e98ef6595956c23.js","src/js/render/renderModal.js"],"sourcesContent":["require('./helpers/bundle-manifest').register(JSON.parse(\"{\\\"EVgbq\\\":\\\"index.def4569e.js\\\",\\\"6Hg8L\\\":\\\"sample.eaf37d8e.png\\\",\\\"aaLHb\\\":\\\"amazon.8e8667c1.png\\\",\\\"5yJ2I\\\":\\\"book1.8d01f172.png\\\",\\\"kAnhc\\\":\\\"book2.b226e49c.png\\\",\\\"410VS\\\":\\\"icons.7429e8d9.svg\\\",\\\"cfiU8\\\":\\\"index.da28579f.js\\\"}\"));","import './js/components/refs';\nimport './js/mobileMenu';\nimport './js/firebase';\nimport './js/render/renderAllCategories';\nimport './js/createSupportList';\nimport './js/topBooks';\nimport './js/scrollToTop';\nimport './js/components/support-funds';\nimport './js/categoryBooks';\nimport './js/loginModals';\nimport './js/switch';\nimport './js/createModal';\nimport './js/render/renderModal';\nimport './js/render/dropdown';\n","import { getCategoryList } from '../api/fetchLogic';\nimport { refs } from '../components/refs';\n\nconst renderAllCategories = data => {\n  const categories = data\n    .map(({ list_name }) => {\n      return `<li class=\"categories__item\" data-category=\"${list_name}\">${list_name}</li>`;\n    })\n    .join('');\n  return categories;\n};\n\nasync function createAllCategories() {\n  try {\n    const allCategories = await getCategoryList();\n    refs.allCategoriesList.insertAdjacentHTML(\n      'beforeend',\n      renderAllCategories(allCategories)\n    );\n  } catch (error) {\n    console.log(error);\n  }\n}\nwindow.addEventListener('load', createAllCategories);","import { getTopBooks } from \"./api/fetchLogic\";\nimport { refs } from \"./components/refs\";\nimport { renderTopCategories} from \"./render/renderTopCategories\";\nimport { renderCategoryTitle } from \"./render/renderCategoryTitle\";\nimport { removeLoading, startLoading } from \"./helpers/spinner\";\nimport { renderError } from \"./render/renderError\";\n\nexport const createTopBooks = async () => {\n    startLoading();\n    renderCategoryTitle(`Best sellers books`);\n    try {\n        const books = await getTopBooks();\n        refs.booksHandler.innerHTML = renderTopCategories(books);\n    } catch (e) {\n        refs.booksHandler.innerHTML = renderError(`Something went wrong...`);\n    }\n    removeLoading();\n}\n\nif (refs.booksHandler) {\n    window.addEventListener(\"load\", createTopBooks);\n}","module.exports = require('./helpers/bundle-url').getBundleURL('EVgbq') + require('./helpers/bundle-manifest').resolve(\"6Hg8L\");","import sample from '../../images/sample.png';\n\nexport const renderBookCard = data => {\n  const books = data\n    .map(({ _id, book_image, title, author }) => {\n      return `<li class=\"card\" data-book=\"${_id}\">\n        <div class=\"card__thumb\">\n            <img src=\"${\n              book_image ? book_image : sample\n            }\" loading=\"lazy\" alt=\"${title}\" class=\"card__img\">\n            <div class=\"card__text\">\n                <p class=\"card__text-inner\">quick view</p>\n            </div>\n        </div>\n        <h3 class=\"card__title\">${title}</h3>\n        <h4 class=\"card__author\">${author}</h4>\n    </li>`;\n    })\n    .join('');\n  return books;\n};\n","import { refs } from \"../components/refs\";\n\nexport const renderCategoryTitle = (title) => {\n    const arrayOfWords = title.split(\" \");\n    const lastWord = arrayOfWords[arrayOfWords.length - 1];\n    const allExceptLastWord = arrayOfWords.slice(0, -1).join(\" \");\n\n    refs.categoryTitle.innerHTML = `${allExceptLastWord} <span class=\"books__title-last\">${lastWord}</span>`;\n}","import { renderBookCard } from \"./renderBookCard\";\n\nexport const renderTopCategories = (data) => {\n    const categories = data.map(({ list_name, books }) => {\n        return `<div class=\"category\" data-category=\"${list_name}\">\n        <h2 class=\"category__title\">${list_name}</h2>\n        <ul class=\"category__list\">\n            ${renderBookCard(books)}\n        </ul>\n        <button class=\"btn--violet category__btn\" data-category=\"${list_name}\">see more</button>\n        </div>`\n    }).join(\"\");\n    return categories;\n} ","import { refs } from \"./components/refs\";\n\nconst observeTop = (entries) => {\n    entries.forEach(entry => {\n        if (!entry.isIntersecting) {\n            refs.scrollTopBtn.classList.remove('hidden');\n        } else {\n            refs.scrollTopBtn.classList.add('hidden');\n        }\n    });\n} \n\nexport const scrollToTop = () => {\n    window.scroll({\n        top: 0,\n        behavior: 'smooth',\n    });\n}\n\nconst toTopObserver = new IntersectionObserver(observeTop);\n\ntoTopObserver.observe(refs.scrollTopTarget);\nrefs.scrollTopBtn.addEventListener(\"click\", scrollToTop)","import { refs } from './components/refs';\nimport { getBooksOfCertainCategory } from './api/fetchLogic';\nimport { removeLoading, startLoading } from './helpers/spinner';\nimport { renderError } from './render/renderError';\nimport { renderCategoryTitle } from './render/renderCategoryTitle';\nimport { renderBookCard } from './render/renderBookCard';\nimport { scrollToTop } from './scrollToTop';\nimport { createTopBooks } from './topBooks';\nimport { activeCategory } from './helpers/activeCategory';\n\nconst createCategoryBooks = async event => {\n if (event.target.nodeName !== 'BUTTON' && event.target.nodeName !== 'LI') {\n    return;\n  }\n  const category = event.target.dataset.category;\n  activeCategory(category);\n  if (category === 'all') {\n    createTopBooks();\n    return;\n  }\n  startLoading();\n  try {\n    renderCategoryTitle(category);\n    const categoryList = await getBooksOfCertainCategory(category);\n    refs.booksHandler.innerHTML = `<ul class=\"books__list\">${renderBookCard(\n      categoryList\n    )}</ul>`;\n    scrollToTop();\n  } catch (e) {\n    refs.booksHandler.innerHTML = renderError(`Something went wrong...`);\n  }\n  removeLoading();\n};\n\nrefs.booksHandler.addEventListener('click', createCategoryBooks);\nrefs.allCategoriesList.addEventListener('click', createCategoryBooks)\n","export const activeCategory = (category) => {\n    const formerActive = document.querySelector('.active-category');\n    formerActive.classList.remove('active-category');\n    document.querySelectorAll('.categories__item').forEach(item => {\n        if (item.dataset.category === category) {\n            item.classList.add('active-category');\n        }\n    })\n}","import { refs } from './refs';\nimport { onKeyDown, closeLoginModalEsc } from './closeModalOnEsc';\nimport { changeModal } from '../loginModals';\nimport { closeLoginModalBackdrop, closeModalBackdrop } from './closeModalBackdrop';\n\nimport { addBookToShopList } from '../helpers/addBookToShopList';\nimport { cleanModal } from '../helpers/modalHelpers';\n\nexport function closeModal() {\n  const closeBtn = document.querySelector('[data-modal-close]');\n  refs.backdrop.classList.add('is-hidden');\n  document.body.classList.remove('lock');\n  closeBtn.removeEventListener('click', closeModal);\n  refs.backdrop.removeEventListener(\"click\", closeModalBackdrop);\n  window.removeEventListener('keydown', onKeyDown);\n  const btnShop = document.querySelector('.modal-book__btn');\n  if (btnShop.disabled === false) {\n    btnShop.removeEventListener(\"click\", addBookToShopList);\n  }\n  cleanModal();\n}\n\nexport const closeLoginModal = () => {\n  const switchModalBtns = document.querySelector('.modal-overlay.open .login__switch');\n  switchModalBtns.removeEventListener(\"click\", changeModal);\n  const currentModal = document.querySelector('.modal-overlay.open')\n  currentModal.classList.remove('open');\n  document.body.classList.remove('lock');\n  currentModal.removeEventListener(\"click\", closeLoginModalOnClick);\n  currentModal.removeEventListener(\"click\", closeLoginModalBackdrop);\n  currentModal.addEventListener(\"keydown\", closeLoginModalEsc);\n}\n\nexport const closeLoginModalOnClick = (event) => {\n  if (!event.target.closest('button')) {\n    return;\n  }\n  if (!event.target.closest('button').classList.contains('modal__close')) {\n    return;\n  }\n  closeLoginModal(event);\n}\n","import { refs } from './refs';\nimport { closeLoginModal, closeModal } from './closeModalBtn';\nimport { addBookToShopList } from '../helpers/addBookToShopList';\nimport { deleteBookFromModal } from '../helpers/deleteBookFromModal';\n\nexport function onKeyDown(evt) {\n  if (evt.code === 'Escape') {\n    refs.backdrop.classList.add('is-hidden');\n    refs.backdrop.removeEventListener('click', deleteBookFromModal);\n    refs.backdrop.removeEventListener('click', addBookToShopList);\n    refs.backdrop.removeEventListener('click', closeModal);\n    window.removeEventListener('keydown', onKeyDown);\n  }\n}\n\n\nexport const closeLoginModalEsc = (event) => {\n  if (event.code !== 'Escape') {\n    return;\n  } else {\n    closeLoginModal(event);\n  }\n}","import { addToShopList, rmvFrmShopList } from '../firebase';\n\nexport function addBookToShopList(evt) {\n  if (evt.target.nodeName !== 'BUTTON') {\n    return;\n  }\n  const btnsHolder = document.querySelector('.modal-book__btns');\n  if (evt.target.dataset.action === 'add') {\n    try {\n      addToShopList(evt);\n      evt.target.dataset.action = 'delete';\n      evt.target.textContent = 'remove from shopping list'\n      btnsHolder.insertAdjacentHTML(\"beforeend\", `<p class=\"modal-book__notification\">\n      Congratulations! You have added the book to the shopping list. To delete, press the button “Remove from the shopping list”.\n    </p>`);\n    } catch (error) {\n      console.log(error);\n    }\n  } else if (evt.target.dataset.action === 'delete' ) {\n    try {\n      rmvFrmShopList(evt);\n      evt.target.dataset.action = 'add';\n      evt.target.textContent = 'add to the shopping list';\n      document.querySelector('.modal-book__notification').remove();\n    } catch (e) {\n      console.log(e);\n    }\n  }\n}\n","import { refs } from '../components/refs';\nimport { rmvFrmShopList } from '../firebase';\n\nexport function deleteBookFromModal(evt) {\n  if (evt.target.classList.contains('btn-remove-list')) {\n    try {\n      rmvFrmShopList(evt);\n    } catch (error) {\n      console.log(error);\n    }\n  }\n}\n","import { closeLoginModal, closeModal } from \"./closeModalBtn\";\n\nexport const closeLoginModalBackdrop = (event) => {\n    if (event.target === event.currentTarget && event.target.classList.contains('modal-overlay')) {\n      closeLoginModal(event);\n    }\n  }\n  \n  export const closeModalBackdrop = (event) => {\n    if (event.target === event.currentTarget) {\n      closeModal();\n    }\n}","import { refs } from \"../components/refs\";\n\nexport const cleanModal = () => {\n    refs.backdrop.innerHTML = '';\n}\n\nexport const alreadyInShopList = () => {\n    return `<button class=\"btn--violet modal-book__btn\" type=\"button\" data-action=\"delete\">remove from the shopping list</button>\n    <p class=\"modal-book__notification\">\n      Congratulations! You have added the book to the shopping list. To delete, press the button “Remove from the shopping list”.\n    </p>`\n}\n\nexport const notInShopList = () => {\n    return '<button class=\"btn--violet modal-book__btn\" type=\"button\" data-action=\"add\">add to shopping list</button>';\n}\n\nexport const unloggedUserShopList = () => {\n    return `<button class=\"btn--violet modal-book__btn\" type=\"button\" disabled>add to shopping list</button>\n    <p class=\"modal-book__notification\">\n     You need to sign in to be able to add books to your shopping list.\n    </p>`;\n}","import {\n  closeLoginModalOnClick,\n  closeLoginModal,\n} from './components/closeModalBtn';\nimport { closeLoginModalEsc } from './components/closeModalOnEsc';\nimport { refs } from './components/refs';\nimport { closeLoginModalBackdrop } from './components/closeModalBackdrop';\n\nconst openModal = currentModal => {\n  currentModal.classList.add('open');\n  document.body.classList.add('lock');\n  currentModal.addEventListener('click', closeLoginModalOnClick);\n  currentModal.addEventListener('click', closeLoginModalBackdrop);\n  window.addEventListener('keydown', closeLoginModalEsc);\n  const switchModalBtns = document.querySelector(\n    '.modal-overlay.open .login__switch'\n  );\n  switchModalBtns.addEventListener('click', changeModal);\n};\n\nfunction openLoginModal(event) {\n  if (event.target.nodeName !== 'BUTTON') {\n    return;\n  }\n  const currentModalData = event.target.dataset.login;\n  let currentModal;\n  if (currentModalData === 'sign-up') {\n    currentModal = refs.signUpModal;\n  } else if (currentModalData === 'sign-in') {\n    currentModal = refs.signInModal;\n  } else {\n    return;\n  }\n  openModal(currentModal);\n}\n\nif (refs.elmsNonAuth) {\n  refs.elmsNonAuth.forEach(btns => btns.addEventListener('click', openLoginModal));\n}\n\nexport function changeModal(event) {\n  if (!event.target.dataset.login) {\n    return;\n  }\n  if (event.target.classList.contains('active-label')) {\n    return;\n  }\n  closeLoginModal();\n  const newModal = event.target.dataset.login;\n  openModal(document.querySelector(`.js-${newModal}`));\n}\n","import { refs } from './components/refs';\nimport { getOneBookById } from './api/fetchLogic';\nimport { renderModal } from './render/renderModal';\nimport { removeLoading, startLoading } from './helpers/spinner';\nimport { renderError } from './render/renderError';\nimport { closeModal } from './components/closeModalBtn';\nimport { onKeyDown } from './components/closeModalOnEsc';\nimport { closeModalBackdrop } from './components/closeModalBackdrop';\n\nimport { addBookToShopList } from './helpers/addBookToShopList';\n\nimport { alreadyInShopList, cleanModal, notInShopList, unloggedUserShopList } from './helpers/modalHelpers';\nimport { getBksFrmShpLst, userCurrent} from './firebase';\n\nexport const openModalBook = async (id) => {\n  const dataBook = await getOneBookById(id);\n  refs.backdrop.innerHTML = renderModal(dataBook);\n\n  const btns = document.querySelector('.modal-book__btns');\n  if (!userCurrent) {\n      btns.innerHTML = unloggedUserShopList();\n  } else {\n    const booksInShopList = await getBksFrmShpLst();\n      if ( booksInShopList && booksInShopList.includes(id)) {\n          btns.innerHTML = alreadyInShopList();\n      } else {\n          btns.innerHTML = notInShopList();\n      }\n  }\n  const btnClose = document.querySelector('[data-modal-close]');\n  btnClose.addEventListener('click', closeModal);\n  refs.backdrop.addEventListener(\"click\", closeModalBackdrop);\n  document.body.classList.add('lock');\n  window.addEventListener('keydown', onKeyDown);\n\n  const btnShop = document.querySelector('.modal-book__btn');\n  if (btnShop.disabled === false) {\n    btnShop.addEventListener(\"click\", addBookToShopList);\n  }\n  refs.backdrop.classList.remove('is-hidden');\n}\n\nconst createModal = async evt => {\n  if (!evt.target.closest('.card')) {\n    return;\n  }\n  cleanModal();\n  startLoading();\n  const bookId = evt.target.closest('.card').dataset.book;\n  try {\n    openModalBook(bookId)\n  } catch (e) {\n    refs.backdrop.innerHTML = renderError(\n      `Something went wrong`\n    );\n  }\n  removeLoading();\n};\n\n\nif (refs.booksHandler) {\n  refs.booksHandler.addEventListener('click', createModal);\n}\n","module.exports = require('./helpers/bundle-url').getBundleURL('EVgbq') + require('./helpers/bundle-manifest').resolve(\"aaLHb\");","module.exports = require('./helpers/bundle-url').getBundleURL('EVgbq') + require('./helpers/bundle-manifest').resolve(\"5yJ2I\");","module.exports = require('./helpers/bundle-url').getBundleURL('EVgbq') + require('./helpers/bundle-manifest').resolve(\"kAnhc\");","module.exports = require('./helpers/bundle-url').getBundleURL('EVgbq') + require('./helpers/bundle-manifest').resolve(\"410VS\");","import sample from '../../images/sample.png';\nimport amazon from '../../images/amazon.png';\nimport book1 from '../../images/book1.png';\nimport book2 from '../../images/book2.png';\nimport cross from '../../images/icons.svg';\n\nexport function renderModal({\n  _id,\n  book_image,\n  title,\n  author,\n  description,\n  amazon_product_url,\n  buy_links,\n}) {\n  const appleURL = buy_links.filter(obj => obj.name === 'Apple Books');\n  const bookShop = buy_links.filter(obj => obj.name === 'Bookshop');\n  return `<div class=\"modal-book\">\n  <button class=\"modal-book__close\" type=\"button\" data-modal-close>\n    <svg class=\"modal-book__close-icon\" width=\"24\" height=\"24\">\n      <use href=\"${cross}#icon-close\"></use>\n    </svg>\n  </button>\n  <div class=\"modal-book__content\" data-book=\"${_id}\">\n      <div class=\"modal-book--flex\">\n          <div class=\"modal-book__thumb\">\n              <img class=\"modal-book__img\" src=\"${book_image ? book_image : sample}\" alt=\"aaa\" loading=\"lazy\">\n          </div>\n          <div class=\"modal-book__text\">\n              <h2 class=\"modal-book__title\">${title}</h2>\n              <p class=\"modal-book__author\">${author}</p>\n              <p class=\"modal-book__description\">${description ? description : `Unfortunately, there is no description`}</p>\n              <ul class=\"modal-book__links\">\n                <li><a target=\"_blank\" rel=\"noopener noreferrer\" href=\"${amazon_product_url}\">\n                  <img class=\"amazon\" src=\"${amazon}\" alt=\"amazon-logo\"></a></li>\n                <li><a target=\"_blank\" rel=\"noopener noreferrer\" href=\"${appleURL}\">\n                  <img class=\"book-first\"src=\"${book1}\" alt=\"\"></a></li>\n                <li><a target=\"_blank\" rel=\"noopener noreferrer\" href=\"${bookShop}\">\n                  <img class=\"book-second\"src=\"${book2}\" alt=\"\"></a></li>\n              </ul>\n          </div>\n      </div>\n      <div class=\"modal-book__btns\"></div>\n    </div>\n</div>`;\n}"],"names":["parcelRequire","register","JSON","parse","$bpxeT","$9270db3bbfa637e6$var$renderAllCategories","data","map","param","list_name","concat","join","$9270db3bbfa637e6$var$_createAllCategories","$parcel$interopDefault","$2TvXO","mark","_callee","allCategories","$laqZe","getCategoryList","_ctx","sent","$9EY00","refs","allCategoriesList","insertAdjacentHTML","console","log","t0","apply","this","arguments","window","addEventListener","$a72193d3d9951866$exports","getBundleURL","resolve","$075e015418971766$export$7ad7812518320979","_id","book_image","title","author","$95d088b2c1cded33$export$c2a58a501338b2e1","arrayOfWords","split","lastWord","length","allExceptLastWord","slice","categoryTitle","innerHTML","$b9d02116228d5733$export$9cecf6f1a0ab4aae","books","$bi3nC","startLoading","getTopBooks","booksHandler","$3sQwF","renderError","removeLoading","$88f15ab57abe0359$export$f5d3771428a1f489","scroll","top","behavior","IntersectionObserver","entries","forEach","entry","isIntersecting","scrollTopBtn","classList","add","remove","observe","scrollTopTarget","$6aa486cbb7a6dfa3$export$2a861dfecfa80adf","category","document","querySelector","querySelectorAll","item","dataset","$63a674f9d7c798a1$var$createCategoryBooks","event","categoryList","target","nodeName","getBooksOfCertainCategory","$iNWLi","$793d2cec39517eb5$export$5d0043c506c61511","evt","btnsHolder","action","addToShopList","textContent","error","rmvFrmShopList","e","$80dcff416d579c85$export$c152e4c60b9b5c64","contains","$615d99164c4f5266$export$de8e1b1372cdb41b","code","backdrop","removeEventListener","$cbd73aeca1cdd143$export$3f6fecd573f3fa48","$615d99164c4f5266$export$e0618624f003904b","$cbd73aeca1cdd143$export$2cfb0a659ba8e8e5","$5ffb2a2a39d33e43$export$31012cc6d4f05b49","currentTarget","$5ffb2a2a39d33e43$export$884eececdc8b3150","$7063b830464955db$export$9f0cd68ca0da8a6f","closeBtn","body","btnShop","disabled","$eefb2611d8f9b575$export$2662f7037d25dd84","currentModal","$cbd73aeca1cdd143$export$ebb27468326d94ab","closest","$eefb2611d8f9b575$var$openModal","$eefb2611d8f9b575$var$openLoginModal","currentModalData","login","signUpModal","signInModal","newModal","elmsNonAuth","btns","$efa53af8736da6e0$exports","$b86f9076317074a2$exports","$0bb5397592f6cf19$exports","$ef33cbb6b4540f9d$exports","$8f31b0f5f3267e2b$export$393c9909a77244fb","id","dataBook","booksInShopList","getOneBookById","description","amazon_product_url","buy_links","appleURL","bookShop","filter","obj","name","userCurrent","getBksFrmShpLst","includes","$8f31b0f5f3267e2b$var$createModal","bookId","book"],"version":3,"file":"index.def4569e.js.map"}