function e(e){return e&&e.__esModule?e.default:e}var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},o={},n={},a=t.parcelRequired7c6;null==a&&((a=function(e){if(e in o)return o[e].exports;if(e in n){var t=n[e];delete n[e];var a={id:e,exports:{}};return o[e]=a,t.call(a.exports,a,a.exports),a.exports}var s=new Error("Cannot find module '"+e+"'");throw s.code="MODULE_NOT_FOUND",s}).register=function(e,t){n[e]=t},t.parcelRequired7c6=a),a("kyEFX").register(JSON.parse('{"5ZPII":"index.ded3d186.js","kx99P":"sample.eaf37d8e.png","1yVwl":"amazon.8e8667c1.png","4tfg6":"book1.8d01f172.png","cv7CL":"book2.b226e49c.png","8OQ7p":"icons.7429e8d9.svg","4l2W5":"index.f438cd29.js"}')),a("fAODQ"),a("3oIZ9"),a("2ix2C");var s=a("2e5nt"),r=a("fAODQ");window.addEventListener("load",(async function(){try{const e=await(0,s.getCategoryList)();r.refs.allCategoriesList.insertAdjacentHTML("beforeend",e.map((({list_name:e})=>`<li class="categories__item" data-category="${e}">${e}</li>`)).join(""))}catch(e){console.log(e)}})),a("7dwgr");var i;s=a("2e5nt"),r=a("fAODQ");i=new URL(a("kyEFX").resolve("kx99P"),import.meta.url).toString();const l=t=>t.map((({_id:t,book_image:o,title:n,author:a})=>`<li class="card" data-book="${t}">\n        <div class="card__thumb">\n            <img src="${o||e(i)}" loading="lazy" alt="${n}" class="card__img">\n            <div class="card__text">\n                <p class="card__text-inner">quick view</p>\n            </div>\n        </div>\n        <h3 class="card__title">${n}</h3>\n        <h4 class="card__author">${a}</h4>\n    </li>`)).join("");r=a("fAODQ");const c=e=>{const t=e.split(" "),o=t[t.length-1],n=t.slice(0,-1).join(" ");r.refs.categoryTitle.innerHTML=`${n} <span class="books__title-last">${o}</span>`};var d=a("43IiB"),m=a("dbSHG");const b=async()=>{(0,d.startLoading)(),c("Best sellers books");try{const e=await(0,s.getTopBooks)();r.refs.booksHandler.innerHTML=e.map((({list_name:e,books:t})=>`<div class="category" data-category="${e}">\n        <h2 class="category__title">${e}</h2>\n        <ul class="category__list">\n            ${l(t)}\n        </ul>\n        <button class="btn--violet category__btn" data-category="${e}">see more</button>\n        </div>`)).join("")}catch(e){r.refs.booksHandler.innerHTML=(0,m.renderError)("Something went wrong...")}(0,d.removeLoading)()};r.refs.booksHandler&&window.addEventListener("load",b);r=a("fAODQ");const g=()=>{window.scroll({top:0,behavior:"smooth"})};new IntersectionObserver((e=>{e.forEach((e=>{e.isIntersecting?r.refs.scrollTopBtn.classList.add("hidden"):r.refs.scrollTopBtn.classList.remove("hidden")}))})).observe(r.refs.scrollTopTarget),r.refs.scrollTopBtn.addEventListener("click",g),a("j5dhk");r=a("fAODQ"),s=a("2e5nt"),d=a("43IiB"),m=a("dbSHG");const u=e=>{document.querySelector(".active-category").classList.remove("active-category"),document.querySelectorAll(".categories__item").forEach((t=>{t.dataset.category===e&&t.classList.add("active-category")}))},v=async e=>{if("BUTTON"!==e.target.nodeName&&"LI"!==e.target.nodeName)return;const t=e.target.dataset.category;if(u(t),"all"!==t){(0,d.startLoading)();try{c(t);const e=await(0,s.getBooksOfCertainCategory)(t);r.refs.booksHandler.innerHTML=`<ul class="books__list">${l(e)}</ul>`,g()}catch(e){r.refs.booksHandler.innerHTML=(0,m.renderError)("Something went wrong...")}(0,d.removeLoading)()}else b()};r.refs.booksHandler.addEventListener("click",v),r.refs.allCategoriesList.addEventListener("click",v);r=a("fAODQ"),r=a("fAODQ");var f=a("2ix2C");function k(e){if("BUTTON"!==e.target.nodeName)return;const t=document.querySelector(".modal-book__btns");if("add"===e.target.dataset.action)try{(0,f.addToShopList)(e),e.target.dataset.action="delete",e.target.textContent="remove from shopping list",t.insertAdjacentHTML("beforeend",'<p class="modal-book__notification">\n      Congratulations! You have added the book to the shopping list. To delete, press the button “Remove from the shopping list”.\n    </p>')}catch(e){console.log(e)}else if("delete"===e.target.dataset.action)try{(0,f.rmvFrmShopList)(e),e.target.dataset.action="add",e.target.textContent="add to the shopping list",document.querySelector(".modal-book__notification").remove()}catch(e){console.log(e)}}a("fAODQ");f=a("2ix2C");function p(e){if(e.target.classList.contains("btn-remove-list"))try{(0,f.rmvFrmShopList)(e)}catch(e){console.log(e)}}function _(e){"Escape"===e.code&&(r.refs.backdrop.classList.add("is-hidden"),r.refs.backdrop.removeEventListener("click",p),r.refs.backdrop.removeEventListener("click",k),r.refs.backdrop.removeEventListener("click",w),window.removeEventListener("keydown",_))}const L=e=>{"Escape"===e.code&&H(e)},h=e=>{e.target===e.currentTarget&&e.target.classList.contains("modal-overlay")&&H(e)},y=e=>{e.target===e.currentTarget&&w()};r=a("fAODQ");const E=()=>{r.refs.backdrop.innerHTML=""};function w(){const e=document.querySelector("[data-modal-close]");r.refs.backdrop.classList.add("is-hidden"),document.body.classList.remove("lock"),e.removeEventListener("click",w),r.refs.backdrop.removeEventListener("click",y),window.removeEventListener("keydown",_);const t=document.querySelector(".modal-book__btn");t.disabled="true",t.removeEventListener("click",k),E()}const H=()=>{document.querySelector(".modal-overlay.open .login__switch").removeEventListener("click",A);const e=document.querySelector(".modal-overlay.open");e.classList.remove("open"),document.body.classList.remove("lock"),e.removeEventListener("click",S),e.removeEventListener("click",h),e.addEventListener("keydown",L)},S=e=>{e.target.closest("button")&&e.target.closest("button").classList.contains("modal__close")&&H(e)};r=a("fAODQ");const T=e=>{e.classList.add("open"),document.body.classList.add("lock"),e.addEventListener("click",S),e.addEventListener("click",h),window.addEventListener("keydown",L);document.querySelector(".modal-overlay.open .login__switch").addEventListener("click",A)};function $(e){if("BUTTON"!==e.target.nodeName)return;const t=e.target.dataset.login;let o;if("sign-up"===t)o=r.refs.signUpModal;else{if("sign-in"!==t)return;o=r.refs.signInModal}T(o)}function A(e){if(!e.target.dataset.login)return;if(e.target.classList.contains("active-label"))return;H();const t=e.target.dataset.login;T(document.querySelector(`.js-${t}`))}r.refs.elmsNonAuth&&r.refs.elmsNonAuth.forEach((e=>e.addEventListener("click",$))),a("4QsFx");var O;r=a("fAODQ"),s=a("2e5nt");O=new URL(a("kyEFX").resolve("1yVwl"),import.meta.url).toString();var x;x=new URL(a("kyEFX").resolve("4tfg6"),import.meta.url).toString();var F;F=new URL(a("kyEFX").resolve("cv7CL"),import.meta.url).toString();var B;function C({_id:t,book_image:o,title:n,author:a,description:s,amazon_product_url:r,buy_links:l}){const c=l.filter((e=>"Apple Books"===e.name)),d=l.filter((e=>"Bookshop"===e.name));return`<div class="modal-book">\n  <button class="modal-book__close" type="button" data-modal-close>\n    <svg class="modal-book__close-icon" width="24" height="24">\n      <use href="${e(B)}#icon-close"></use>\n    </svg>\n  </button>\n  <div class="modal-book__content" data-book="${t}">\n      <div class="modal-book--flex">\n          <div class="modal-book__thumb">\n              <img class="modal-book__img" src="${o||e(i)}" alt="aaa" loading="lazy">\n          </div>\n          <div class="modal-book__text">\n              <h2 class="modal-book__title">${n}</h2>\n              <p class="modal-book__author">${a}</p>\n              <p class="modal-book__description">${s||"Unfortunately, there is no description"}</p>\n              <ul class="modal-book__links">\n                <li><a target="_blank" rel="noopener noreferrer" href="${r}">\n                  <img class="amazon" src="${e(O)}" alt="amazon-logo"></a></li>\n                <li><a target="_blank" rel="noopener noreferrer" href="${c}">\n                  <img class="book-first"src="${e(x)}" alt=""></a></li>\n                <li><a target="_blank" rel="noopener noreferrer" href="${d}">\n                  <img class="book-second"src="${e(F)}" alt=""></a></li>\n              </ul>\n          </div>\n      </div>\n      <div class="modal-book__btns"></div>\n    </div>\n</div>`}B=new URL(a("kyEFX").resolve("8OQ7p"),import.meta.url).toString();d=a("43IiB"),m=a("dbSHG"),f=a("2ix2C");const M=async e=>{const t=await(0,s.getOneBookById)(e);r.refs.backdrop.innerHTML=C(t);const o=document.querySelector(".modal-book__btns"),n=await(0,f.getBksFrmShpLst)();f.userCurrent?n.includes(e)?o.innerHTML='<button class="btn--violet modal-book__btn" type="button" data-action="delete">remove from the shopping list</button>\n    <p class="modal-book__notification">\n      Congratulations! You have added the book to the shopping list. To delete, press the button “Remove from the shopping list”.\n    </p>':o.innerHTML='<button class="btn--violet modal-book__btn" type="button" data-action="add">add to shopping list</button>':o.innerHTML='<button class="btn--violet modal-book__btn" type="button" disabled>add to shopping list</button>\n    <p class="modal-book__notification">\n     You need to sign in to be able to add books to your shopping list.\n    </p>';document.querySelector("[data-modal-close]").addEventListener("click",w),r.refs.backdrop.addEventListener("click",y),document.body.classList.add("lock"),window.addEventListener("keydown",_);const a=document.querySelector(".modal-book__btn");a.disabled="true",a.addEventListener("click",k)};r.refs.booksHandler&&r.refs.booksHandler.addEventListener("click",(async e=>{if(!e.target.closest(".card"))return;E(),(0,d.startLoading)(),r.refs.backdrop.classList.remove("is-hidden");const t=e.target.closest(".card").dataset.book;try{M(t)}catch(e){r.refs.backdrop.innerHTML=(0,m.renderError)("Something went wrong")}(0,d.removeLoading)()}));
//# sourceMappingURL=index.ded3d186.js.map
