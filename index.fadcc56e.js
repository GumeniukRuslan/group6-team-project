!function(){function e(e){return e&&e.__esModule?e.default:e}var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},n={},a={},r=t.parcelRequired7c6;null==r&&((r=function(e){if(e in n)return n[e].exports;if(e in a){var t=a[e];delete a[e];var r={id:e,exports:{}};return n[e]=r,t.call(r.exports,r,r.exports),r.exports}var o=new Error("Cannot find module '"+e+"'");throw o.code="MODULE_NOT_FOUND",o}).register=function(e,t){a[e]=t},t.parcelRequired7c6=r),r("iE7OH").register(JSON.parse('{"EVgbq":"index.fadcc56e.js","6Hg8L":"sample.eaf37d8e.png","aaLHb":"amazon.8e8667c1.png","5yJ2I":"book1.8d01f172.png","kAnhc":"book2.b226e49c.png","cfiU8":"index.9a29933d.js"}')),r("9EY00"),r("gjDBM"),r("iNWLi");var o=r("bpxeT"),c=r("2TvXO"),s=r("laqZe"),i=r("9EY00"),d=function(e){return e.map((function(e){var t=e.list_name;return'<li class="categories__item">'.concat(t,"</li>")})).join("")};function l(){return(l=e(o)(e(c).mark((function t(){var n;return e(c).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,s.getCategoryList)();case 3:n=e.sent,i.refs.allCategoriesList.insertAdjacentHTML("beforeend",d(n)),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),t,null,[[0,7]])})))).apply(this,arguments)}window.addEventListener("load",(function(){return l.apply(this,arguments)})),r("iSHBX");var u;o=r("bpxeT"),c=r("2TvXO"),s=r("laqZe"),i=r("9EY00");u=r("aNJCr").getBundleURL("EVgbq")+r("iE7OH").resolve("6Hg8L");var m,g=function(t){return t.map((function(t){var n=t._id,a=t.book_image,r=t.title,o=t.author;return'<li class="card" data-book="'.concat(n,'">\n        <div class="card__thumb">\n            <img src="').concat(a||e(u),'" loading="lazy" alt="').concat(r,'" class="card__img">\n            <div class="card__text">\n                <p class="card__text-inner">quick view</p>\n            </div>\n        </div>\n        <h3 class="card__title">').concat(r,'</h3>\n        <h4 class="card__author">').concat(o,"</h4>\n    </li>")})).join("")},p=(i=r("9EY00"),function(e){var t=e.split(" "),n=t[t.length-1],a=t.slice(0,-1).join(" ");i.refs.categoryTitle.innerHTML="".concat(a,' <span class="books__title-last">').concat(n,"</span>")}),v=r("bi3nC"),h=r("3sQwF"),f=(m=e(o)(e(c).mark((function t(){var n;return e(c).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(0,v.startLoading)(),p("Best sellers books"),e.prev=2,e.next=5,(0,s.getTopBooks)();case 5:n=e.sent,i.refs.booksHandler.innerHTML=n.map((function(e){var t=e.list_name,n=e.books;return'<div class="category" data-category="'.concat(t,'">\n        <h2 class="category__title">').concat(t,'</h2>\n        <ul class="category__list">\n            ').concat(g(n),'\n        </ul>\n        <button class="btn--violet category__btn" data-category="').concat(t,'">see more</button>\n        </div>')})).join(""),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),i.refs.booksHandler.innerHTML=(0,h.renderError)("Something went wrong...");case 12:(0,v.removeLoading)();case 13:case"end":return e.stop()}}),t,null,[[2,9]])}))),function(){return m.apply(this,arguments)});i.refs.booksHandler&&window.addEventListener("load",f);i=r("9EY00");var b=function(){window.scroll({top:0,behavior:"smooth"})};new IntersectionObserver((function(e){e.forEach((function(e){e.isIntersecting?i.refs.scrollTopBtn.classList.add("hidden"):i.refs.scrollTopBtn.classList.remove("hidden")}))})).observe(i.refs.scrollTopTarget),i.refs.scrollTopBtn.addEventListener("click",b),r("56px5");o=r("bpxeT"),c=r("2TvXO"),i=r("9EY00"),s=r("laqZe"),v=r("bi3nC"),h=r("3sQwF");var _=r("iNWLi"),k=(_=r("iNWLi"),function(){var t=e(o)(e(c).mark((function t(n){var a,r;return e(c).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.target.classList.contains("card__img")&&(0,_.addToShopList)(n),n.target.classList.contains("card__title")&&(0,_.rmvFrmShopList)(n),"BUTTON"===n.target.nodeName){e.next=4;break}return e.abrupt("return");case 4:return(0,v.startLoading)(),a=n.target.dataset.category,e.prev=6,e.next=9,(0,s.getBooksOfCertainCategory)(a);case 9:r=e.sent,p(a),i.refs.booksHandler.innerHTML='<ul class="books__list">'.concat(g(r),"</ul>"),b(),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(6),i.refs.booksHandler.innerHTML=(0,h.renderError)("Something went wrong...");case 18:(0,v.removeLoading)();case 19:case"end":return e.stop()}}),t,null,[[6,15]])})));return function(e){return t.apply(this,arguments)}}());i.refs.booksHandler.addEventListener("click",k);var L=document.querySelector("input[name=theme_switch]");window.matchMedia("(prefers-color-scheme: dark)").matches?(document.documentElement.setAttribute("data-theme","dark"),L.checked=!0):(document.documentElement.setAttribute("data-theme","light"),L.checked=!1),L.addEventListener("change",(function(e){document.documentElement.setAttribute("data-theme",e.target.checked?"dark":"light")})),window.matchMedia("(prefers-color-scheme: dark)").matches?(document.documentElement.setAttribute("data-theme","dark"),L.checked=!0):(document.documentElement.setAttribute("data-theme","light"),L.checked=!1),L.addEventListener("change",(function(e){var t=e.target.checked?"dark":"light";document.documentElement.setAttribute("data-theme",t),localStorage.setItem("theme",t)}));var E=localStorage.getItem("theme");E&&(document.documentElement.setAttribute("data-theme",E),L.checked="dark"===E);o=r("bpxeT"),c=r("2TvXO"),i=r("9EY00");function w(){i.refs.modalWindow.classList.toggle("is-hidden")}(i=r("9EY00")).refs.bookCard.addEventListener("click",w),i.refs.closeModal.addEventListener("click",w);var H;s=r("laqZe");H=r("aNJCr").getBundleURL("EVgbq")+r("iE7OH").resolve("aaLHb");var T;T=r("aNJCr").getBundleURL("EVgbq")+r("iE7OH").resolve("5yJ2I");var y;y=r("aNJCr").getBundleURL("EVgbq")+r("iE7OH").resolve("kAnhc");var x=function(e){var t=new URL(u),n=new URL(H),a=new URL(T),r=new URL(y);return function(e){var o=e._id,c=e.book_image,s=e.title,i=e.author,d=e.description,l=e.amazon_product_url;return'<div class="modal">\n        <button class="modal__btn-close" type="button" data-modal-close>\n          <svg class="end" width="12" height="12">\n            <use href="./images/icons.svg#icon-close"></use>\n          </svg>\n        </button>\n        <div class="modal-card__thumb" data-book="'.concat(o,'>\n        <img src="').concat(c||t,'" loading="lazy" alt="').concat(s,'" class="card__img">\n        <h2 class="modal-card__title">').concat(s,'</h2>\n        <p class="modal-card__author">').concat(i,'</p>\n        <div class="modal-card__descriprion">').concat(d,'</div>\n        <ul class="modal-card__links-shop">\n          <li><a class="modal-card__link" href="').concat(l,'"><img class="amazon-img" src="src="').concat(n,'" alt="amazon"></a></li>\n          <li><a class="modal-card__link" href="').concat(l,'"><img class="book1_img" src="').concat(a,'" alt="book1"></a></li>\n          <li><a class="modal-card__link" href="').concat(l,'"><img class="book2_img" src="').concat(r,'" alt="book2"></a></li>\n        </ul>\n        <div class="add_to_list">\n          <button class="btn-add-list" type="button">add to shopping list</button>\n        </div>\n        <div class="remove_from_list">\n        <button class="btn-remove-list" type="button">remove from the shopping list</button>\n        <div class="modal-notification">\n          Congratulations! You have added the book to the shopping list. To delete, press the button “Remove from the shopping list”.\n        </div>\n      </div>\n    </div>\n</div>')}.join("")},O=(v=r("bi3nC"),h=r("3sQwF"),function(){var t=e(o)(e(c).mark((function t(n){var a;return e(c).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return w(),i.refs.backdrop.innerHTML="",(0,v.startLoading)(),a=n.target.dataset.book,e.prev=4,e.next=7,(0,s.getOneBookById)(a);case 7:e.sent,i.refs.backdrop.innerHTML=x(),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(4),i.refs.backdrop.innerHTML=(0,h.renderError)("This page is empty, add some books and proceed to order.");case 14:(0,v.removeLoading)();case 15:case"end":return e.stop()}}),t,null,[[4,11]])})));return function(e){return t.apply(this,arguments)}}());i.refs.bookCard.addEventListener("click",O)}();
//# sourceMappingURL=index.fadcc56e.js.map
